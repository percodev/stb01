Диагностическая БД пишется на отдельный диск (SD-карту). Рекомендуется настроить её периодическое резервирование. Период резервного копирования БД кратен 1 суткам. Также задаётся время процедуры резервного копирования. Копирование происходит также на SD-карту, по кругу удаляя более старые файлы при нехватке места. Если резервное копирование было успешным, то в события диагностики в текущей БД удаляются. Помимо непосредственного чтения SD-карты кард-ридером можно получить файлы БД по протоколу за определённый период (задаётся в запросе). Ответ будет получен в виде архива *.tar.gz.

## Установка
```json
{
        "set" : "settings",
        "settings" : {
		"db_backup_period" : "1",
		"db_backup_interval_start" : "7200",
		"db_backup_interval_stop" : "14400"
	}
}
```

## Запрос
```json
{
	"get" : "settings",
	"settings" :  {
		"prefix": "db_backup"
	}
}
```
## Ответ (результат выполнения set или ответ на get)
```json
{
	"answer" : { "settings": "ok" },
	"settings" : {
		"db_backup_period" : "1",
		"db_backup_interval_start" : "7200",
		"db_backup_interval_stop" : "14400"
		"db_backup_last_time" : "1734082421"
	}
}
```
Выгрузка архива *.tar.gz с файлами диагностической БД осуществляется аналогично выгрузке лог-архива ((/Сервис.md)), с добавлением фильтра по времени следующим образом:


## Запрос
```json
{
	"get" : "data_file",
	"data_file" : {
		"file":"db_exdev",
		"date_begin":1734382800,
		"date_end":1734469200
	}
}
```

## Ответ (результат выполнения set)
```json
{
	"answer" : { "data_file": "ok" },
	"data_file" : {
		"file" : "db_exdev",
		"size": 822,
		"first":true,
		"last": true,
		"part" : "H4sIAAAAAAAAA+3cz2sTaRjA8Tex21awm4KH1ttQoVTZml/Ntrf6g6ALIrT2sCwss5POGzPtTN4y8yZVEUSxePas4B8g7HFh8SQevO5lvQiCPS1762FPZelOpgmdpjFRDO1u9/uBN2/eZ555Z5L3NC8P41V12vOW03bJLFnLq7W1tOi7TGi2UIj6UHsffc/OzOYz+VwmMzMjMtnwa0EYhf7fykG1QFu+YQhfKd0tr9fx/yjvwPrL27ash4NAXrBLfblG9/XPdVj/wkzYGZm+XL2H//n631y47mhplJXvWdrIi1GRTIqL4f8hxFbYkrFUK2wDsXHiE6bfEhfKf440kke2xMhW/+4bAAAAANDDo1OJobGxscTjdW2VXCnrsqqjj+SVxeKlpaKxdOny9aIRhaZsK3w2/O7GUvFqcfEbQzuevKuq0lTlciD13oFlVavGhp6yY2dJ3zcd33SlvT/mKa3CTyvQ0u90JHCtemyaxmO6js+xZgWB6Tu3Krot5spyLFSq6Q6RtvMaoUCrtb2IrVTsrsqOL03LtXxvLxYNTVWLTeMEZtm1gsr+H+tU7XDyuvJXnfagL914MJDVQPmBue9OWsGS0lp5B+OB9OvOsjx4wLJtM9s5nGuFzzWezYe+/luk3qV+ST1JuamrqYlwCAAAAADA8XF26MxAcjg5vOdk2KLxLevHX3//Tbye3zk72C3peTPpq25JD5pJA92SVppJJ7okLbxsJiW7JF1bbyYlPp7009yd3aQe9R/T65b7xX9zr/qPbK69/uPbXD5D/cdhmL0/+FBMb44LMRqNf65MrljfP9yYH1l9dW/96RuxWwOSbMXzbyf+OP3Di/ONfaPB1MS+faOj+xUAAAAAAByV471vJNr2BerP0lMblclt6kkAAAAAAMce9SQ7R70E+Dy96n+CivfF1+ha/5Pt9P4f6n8Oy/jmdNQndttotKkXtqn0s/r2ZGWjtb9346/3pQ/pc3Ofm996gUyj34kRsXirj79sBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACOswRvXAEAAAAAAAAAAAAAAAAAAAAAAAAAAACAf41/AICXm3YAzgAA"
	}
}
```



`db_backup_period`, `db_backup_interval_start`, `db_backup_interval_stop` — Период в сутках и границы интервала в секундах относительно начала суток.

`db_backup_last_time` — Время последнего успешного копирования (unix epoch time)

`date_begin`/`date_end` — Начало/конец диапазона в сек от 01.01.1970 (включительно)
