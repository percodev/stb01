Низкоуровневые события ИУ содержат диагностическую информацию о состоянии всех дочерних плат, датчиков, входных и выходных сигналов, неисправностях и т.д. Эти события регистрируются в отдельной БД, располагаемой на SD-карте. В соответствии с конфигурацией периодически производится резервное копирование БД (с очисткой текущей БД). Все копии БД могут быть скачаны с устройства. В дополнение представлены механизмы запроса событий из текущей БД и асинхронная передача событий серверу системы.

# Получение событий по запросу.
## Количество событий.
### Запрос:
```json
{
    "get_count":"exdev_event",
    "exdev_event":{"start":-10800,"stop":2082747540}
}
```

### Ответ:
```json
{
    "answer":{"exdev_event":"ok"},
    "exdev_event":{"exdev_event_number":9069}
}
```  
## Запрос событий.
### Запрос:
```json
{
    "get":"exdev_event",
    "exdev_event":{"limit":10,"offset":0,"start":-10800,"stop":2082747540}
}
```

### Ответ:
```json
{
    "answer":{"exdev_event":"ok"},
    "exdev_event":{ 
        "id":76,
        "date":1732550302,
        "timezone_offset":-10800,
        "count":0,
        "mode":0,
        "err_ir_led":0,
        "err_motor_master":0,
        "err_motor_slave":0,
        "started":0,
        "pass_right":0,
        "pass_left":0,
        "but_left":0,
        "but_right":0,
        "but_stop":0,
        "door":0,
        "fire_alarm":0,
        "alarm_out":1,
        "is_flash_led":0,
        "ind_stvorki":0,
        "ind_strelki":0,
        "sensors_top":16383,
        "sensors_bottom":0,
        "sensors_service":0,
        "sensors_add_1":0,
        "sensors_add_2":0
    }
}
```  
# Асинхронная передача событий.
Для начала передачи асинхронных событий устройство должно получить от сервера системы фильтр (набор фильтров), который будет применён на время сессии по текущему сокету. Передаваться будут только те события, которые последовательно прошли всю цепочку фильтров.

## Фильтр, разрешающий передачу всех событий (включение асинхронной передачи)
### Запрос:
```json
{"set":"exdev_event_acl","exdev_event_acl":[{"allow":"true"}]}
```  

### Ответ:
```json
{"answer":{"exdev_event_acl":"ok","set":"own"},"exdev_event_acl":[{"allow":"true"}]}
```  

## Фильтр, запрещающий передачу всех событий (выключение асинхронной передачи)
### Запрос:
```json
{"set":"exdev_event_acl","exdev_event_acl":[]}
```  

### Ответ:
```json
{"answer":{"exdev_event_acl":"ok","set":"own"},"exdev_event_acl":[]}
```  

## Асинхронное событие передаваемое устройством.

```json
{
    "exdev_event":{
        "id":897,
        "date":1732608129,
        "timezone_offset":-10800,
        "count":0,
        "mode":0,
        "err_ir_led":0,
        "err_motor_master":0,
        "err_motor_slave":0,
        "started":0,
        "pass_right":0,
        "pass_left":0,
        "but_left":1,
        "but_right":0,
        "but_stop":1,
        "door":0,
        "fire_alarm":0,
        "alarm_out":1,
        "is_flash_led":0,
        "ind_stvorki":4,
        "ind_strelki":2,
        "sensors_top":3980,
        "sensors_bottom":6336101,
        "sensors_service":0,
        "sensors_add_1":0,
        "sensors_add_2":0
    }
}
```  

`allow` — Пропуск события через фильтр
		`true` - да
		`false` - нет 

`limit` — Ограничение событий в выборке 1 — 20

`offset` — Сдвиг выборки событий относительно 1-го (самого позднего)  события 0 — 4294967295

`start`/`stop` — Начало/конец диапазона в сек от 01.01.1970 (включительно)

`start_id`/`stop_id` — Начало/конец диапазона по id событий  (включительно)

`done` — Необязательный параметр запроса. Признак окончания передачи событий в ответ на запрос. Если в запросе выставлен в `true`, то после последнего переданного контроллером события будет дополнительны кадр с объектом {`done`:`true`}.

`date` — Дата в секундах с 1970 г по 2038 г(точность до 1 секунды)

`timezone_offset` — Сдвиг временной зоны относительно UTC в с. на момент формирования события (точность до 1 секунды) (Значение -10800, например, соответствует временной зоне GMT+3)
